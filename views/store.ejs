<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <title>Coffee Shop</title>
</head>

<body>
  <%- include('navbar.ejs') %>
  <div class="container my-4">
      <a class="btn btn-primary float-end" href="/store/logout">LOGOUT</a>
      <h1>Coffee Shop</h1>

      <table class="table">
        <thead>
          <tr>
            <th>Image</th>
            <th>Name</th>
            <th>Price</th>
            <th>Category</th>
            <th>Add to Cart</th>
          </tr>
        </thead>
        <tbody>
          <% data.forEach(el=> { %>
            <tr>
              <td><img class="img-thumbnail" width="200" height="100" src="<%= el.image %>"></td>
              <td>
                <%= el.name %>
              </td>
              <td>
                <%= el.price %>
              </td>
              <td>
                <%= el.category %>
              </td>
              <td><a class="btn btn-secondary" href="/store/<%= profile.id %>/addtocart/<%= el.id %>">Add to Cart</a></td>
            </tr>
            <% }) %>
        </tbody>
      </table>

      <hr>
     <% if(profile.Orders){%> 
      <h2>Shopping Cart</h2> 
     <% } %>
     
     
     
      <table class="table">
        <tr>
        <th>No</th>
        <th>Cart Items</th>
        <th>Price</th>
        <th>Amount</th>
        <th>Total Price</th>
      </tr>

        <% profile.Orders.forEach((order, i) => { %>

          <tr>
            <td><%= i +1 %></td>
            <td><%= order.Coffee.name %></td>
            <td><%= order.basePrice %></td>
            <td>
              <a class="btn btn-success" href="/store/<%= profile.id %>/increase/<%= order.CoffeeId %>">+</a>
              <%= order.quantity %>
              <a class="btn btn-warning" href="/store/<%= profile.id %>/decrease/<%= order.CoffeeId %>">-</a>
            </td>
            <td><%= order.totalPrice %></td>
          </tr>

          <%  }) %>
      </table>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"></script>
</body>

</html>